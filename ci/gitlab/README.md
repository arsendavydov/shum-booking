## Общие скрипты для деплоя

Эта папка содержит **общие скрипты для деплоя**, которые используются как GitHub Actions, так и другими CI/CD системами.

### Скрипты

- **`get-kubeconfig.sh`** — получение kubeconfig с сервера по SSH
  - Используется GitHub Actions для подключения к K3s кластеру
  - Получает kubeconfig через SSH и сохраняет локально
  
- **`create-configmap-and-secret.sh`** — создание ConfigMap и Secret из `.prod.env`
  - Загружает `.prod.env` с сервера по SSH
  - Создает Kubernetes ConfigMap и Secret
  - Автоматически определяет `imagePullSecret` на основе registry (ghcr.io/gitlab)
  
- **`apply-manifests.sh`** — применение Kubernetes манифестов
  - Применяет все манифесты из `k3s/*.yaml`
  - Использует retry логику для надежности
  - Проверяет готовность ресурсов после применения

- **`helpers.sh`** — вспомогательные функции
  - Общие утилиты для работы с Kubernetes
  - Функции проверки и валидации

### Использование

Эти скрипты вызываются из:
- **GitHub Actions** (`.github/workflows/deploy.yml`) — основной способ деплоя
- Других CI/CD систем при необходимости

Все скрипты универсальны и не зависят от конкретной CI/CD системы.


